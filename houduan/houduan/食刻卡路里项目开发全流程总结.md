# ğŸ é£Ÿåˆ»å¡è·¯é‡Œé¡¹ç›®å¼€å‘å…¨æµç¨‹æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**ï¼šé£Ÿåˆ»å¡è·¯é‡Œ  
**é¡¹ç›®ç±»å‹**ï¼šå¾®ä¿¡å°ç¨‹åº + Spring Bootåç«¯  
**å¼€å‘æ—¶é—´**ï¼š2024å¹´-2025å¹´  
**æ ¸å¿ƒåŠŸèƒ½**ï¼šåŸºäºAIè¯†åˆ«æŠ€æœ¯çš„æ™ºèƒ½å¡è·¯é‡Œè®°å½•ä¸å¥åº·ç®¡ç†ç³»ç»Ÿ  

### ğŸ¯ é¡¹ç›®æ„¿æ™¯
æ‰“é€ ä¸€æ¬¾æ™ºèƒ½åŒ–çš„é¥®é£Ÿå¥åº·ç®¡ç†å·¥å…·ï¼Œé€šè¿‡AIæŠ€æœ¯é™ä½ç”¨æˆ·è®°å½•é¥®é£Ÿçš„é—¨æ§›ï¼Œå¸®åŠ©ç”¨æˆ·å…»æˆå¥åº·çš„é¥®é£Ÿä¹ æƒ¯ï¼Œå®ç°ç§‘å­¦çš„å¡è·¯é‡Œç®¡ç†ã€‚

---

## ğŸ—ï¸ ç¬¬ä¸€é˜¶æ®µï¼šå‰æœŸè®¾è®¡

### éœ€æ±‚åˆ†æ

#### 1. ç”¨æˆ·ç—›ç‚¹åˆ†æ
- **ä¼ ç»Ÿè®°å½•æ–¹å¼ç¹ç**ï¼šæ‰‹åŠ¨è¾“å…¥é£Ÿç‰©åç§°ã€æŸ¥æ‰¾å¡è·¯é‡Œæ•°æ®è€—æ—¶è€—åŠ›
- **æ•°æ®å‡†ç¡®æ€§ä½**ï¼šç”¨æˆ·ä¸»è§‚ä¼°ç®—é£Ÿç‰©ä»½é‡å’Œå¡è·¯é‡Œå®¹æ˜“å‡ºç°åå·®
- **åšæŒéš¾åº¦å¤§**ï¼šå¤æ‚çš„æ“ä½œæµç¨‹å¯¼è‡´ç”¨æˆ·éš¾ä»¥æŒç»­ä½¿ç”¨
- **ç¼ºä¹ç§‘å­¦æŒ‡å¯¼**ï¼šç¼ºå°‘ä¸ªæ€§åŒ–çš„å¥åº·å»ºè®®å’Œç›®æ ‡ç®¡ç†

#### 2. ç›®æ ‡ç”¨æˆ·ç¾¤ä½“
- **å¥èº«çˆ±å¥½è€…**ï¼šéœ€è¦ç²¾ç¡®æ§åˆ¶å¡è·¯é‡Œæ‘„å…¥çš„è¿åŠ¨äººç¾¤
- **å‡è‚¥äººç¾¤**ï¼šå¸Œæœ›é€šè¿‡é¥®é£Ÿç®¡ç†è¾¾åˆ°å‡é‡ç›®æ ‡çš„ç”¨æˆ·
- **å¥åº·æ„è¯†ç”¨æˆ·**ï¼šå…³æ³¨å¥åº·ç”Ÿæ´»æ–¹å¼çš„æ™®é€šæ¶ˆè´¹è€…
- **æ…¢æ€§ç—…æ‚£è€…**ï¼šéœ€è¦ä¸¥æ ¼æ§åˆ¶é¥®é£Ÿçš„ç‰¹æ®Šäººç¾¤

#### 3. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
- **AIæ™ºèƒ½è¯†åˆ«**ï¼šä¸€é”®æ‹ç…§è¯†åˆ«é£Ÿç‰©ï¼Œè‡ªåŠ¨è®¡ç®—å¡è·¯é‡Œ
- **æ•°æ®è®°å½•ç®¡ç†**ï¼šä¾¿æ·çš„é¥®é£Ÿè®°å½•æ·»åŠ ã€æŸ¥çœ‹ã€åˆ é™¤åŠŸèƒ½
- **å¥åº·æ•°æ®ç»Ÿè®¡**ï¼šå¤šç»´åº¦çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–å±•ç¤º
- **ä¸ªæ€§åŒ–è®¾ç½®**ï¼šç›®æ ‡å¡è·¯é‡Œè®¾å®šã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- **å†å²è¿½è¸ª**ï¼šé•¿æœŸé¥®é£Ÿä¹ æƒ¯åˆ†æå’Œè¶‹åŠ¿å±•ç¤º

### æŠ€æœ¯æ¶æ„è®¾è®¡

#### 1. æ•´ä½“æ¶æ„
```
å‰ç«¯ï¼šå¾®ä¿¡å°ç¨‹åº
    â†“ (HTTPS/API)
ä¸­é—´å±‚ï¼šNginxåå‘ä»£ç†
    â†“
åç«¯ï¼šSpring Bootåº”ç”¨
    â†“
æ•°æ®å±‚ï¼šMySQL + Redis + MinIO
    â†“
AIæœåŠ¡ï¼šç™¾åº¦AI + æœ¬åœ°TensorFlow Lite
```

#### 2. å‰ç«¯æŠ€æœ¯é€‰å‹
- **å¼€å‘æ¡†æ¶**ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶
- **UIç»„ä»¶åº“**ï¼šVant Weapp + è‡ªå®šä¹‰ç»„ä»¶
- **çŠ¶æ€ç®¡ç†**ï¼šæœ¬åœ°å­˜å‚¨ + å…¨å±€äº‹ä»¶æ€»çº¿
- **ç½‘ç»œè¯·æ±‚**ï¼šå°è£…wx.request + JWTè®¤è¯
- **ç”¨æˆ·ä½“éªŒ**ï¼šè‡ªå®šä¹‰ç²‰è‰²ä¸»é¢˜ + åƒç´ é£åŠ¨ç”»

#### 3. åç«¯æŠ€æœ¯é€‰å‹
- **æ ¸å¿ƒæ¡†æ¶**ï¼šSpring Boot 2.7.x
- **æ•°æ®åº“**ï¼šMySQL 8.0ï¼ˆä¸»æ•°æ®åº“ï¼‰
- **ç¼“å­˜**ï¼šRedis 7.xï¼ˆä¼šè¯ç®¡ç†ã€ä¸´æ—¶æ•°æ®ï¼‰
- **æ–‡ä»¶å­˜å‚¨**ï¼šMinIOï¼ˆå›¾ç‰‡å­˜å‚¨ï¼‰
- **è®¤è¯æˆæƒ**ï¼šJWT + å¾®ä¿¡å°ç¨‹åºç™»å½•
- **AIè¯†åˆ«**ï¼šç™¾åº¦AIå¼€æ”¾å¹³å° + TensorFlow Lite

#### 4. éƒ¨ç½²æ¶æ„è®¾è®¡
- **äº‘æœåŠ¡å•†**ï¼šé˜¿é‡Œäº‘ECS
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **åå‘ä»£ç†**ï¼šNginx
- **CDNåŠ é€Ÿ**ï¼šCloudflare
- **SSLè¯ä¹¦**ï¼šCloudflareå…è´¹SSL
- **åŸŸåç®¡ç†**ï¼šCloudflare DNS

### æ•°æ®åº“è®¾è®¡

#### 1. æ ¸å¿ƒæ•°æ®è¡¨
```sql
-- ç”¨æˆ·è¡¨
user (id, openid, nickname, avatar_url, target_calories, ...)

-- é£Ÿç‰©æ•°æ®è¡¨  
food (id, name, category_id, calories, protein, fat, carbohydrate, ...)

-- é¥®é£Ÿè®°å½•è¡¨
meal_record (id, user_id, meal_time, meal_type, total_calories, ...)

-- é¥®é£Ÿè¯¦æƒ…è¡¨
meal_food (id, meal_id, food_id, food_name, portion, calories, ...)

-- å›¾ç‰‡è¯†åˆ«è®°å½•è¡¨
image_recognition (id, user_id, image_url, recognition_result, ...)

-- ç”¨æˆ·ç»Ÿè®¡è¡¨
user_statistics (id, user_id, date, total_calories, ...)
```

#### 2. å…³é”®è®¾è®¡åŸåˆ™
- **æ•°æ®å†—ä½™**ï¼šåœ¨meal_foodè¡¨ä¸­å†—ä½™é£Ÿç‰©åç§°ï¼Œé¿å…å…³è”æŸ¥è¯¢
- **JSONå­˜å‚¨**ï¼šè¯†åˆ«ç»“æœä½¿ç”¨JSONæ ¼å¼å­˜å‚¨ï¼Œä¾¿äºå¤æ‚æ•°æ®å¤„ç†
- **æ—¶é—´åˆ†åŒº**ï¼šæŒ‰æ—¥æœŸåˆ†åŒºç»Ÿè®¡è¡¨ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½
- **ç´¢å¼•ä¼˜åŒ–**ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µå»ºç«‹åˆé€‚ç´¢å¼•

### UI/UXè®¾è®¡è§„èŒƒ

#### 1. è®¾è®¡è¯­è¨€
- **ä¸»é¢˜è‰²å½©**ï¼šç²‰è‰²æ¸å˜ç³»ï¼ˆ#ff9a9e â†’ #fad0c4ï¼‰
- **è®¾è®¡é£æ ¼**ï¼šç°ä»£ç®€çº¦ + åƒç´ é£å…ƒç´ 
- **äº¤äº’åŠ¨ç”»**ï¼šç²‰è‰²æ–¹å—è·³è·ƒåŠ¨ç”» + æµç•…è¿‡æ¸¡
- **å­—ä½“ç³»ç»Ÿ**ï¼šå¾®ä¿¡é»˜è®¤å­—ä½“æ ˆ

#### 2. ç”¨æˆ·ä½“éªŒåŸåˆ™
- **æ“ä½œç®€åŒ–**ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸è¶…è¿‡3æ­¥æ“ä½œ
- **å³æ—¶åé¦ˆ**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰æ˜ç¡®çš„çŠ¶æ€æç¤º
- **å®¹é”™è®¾è®¡**ï¼šæä¾›æ¸¸å®¢æ¨¡å¼å’Œç¦»çº¿åŠŸèƒ½
- **ä¸ªæ€§åŒ–**ï¼šæ”¯æŒç›®æ ‡è®¾å®šå’Œæ•°æ®ä¸ªæ€§åŒ–å±•ç¤º

---

## ğŸ”§ ç¬¬äºŒé˜¶æ®µï¼šä¸­æœŸå®ç°ï¼ˆå‰åç«¯å¼€å‘ï¼‰

### å‰ç«¯å¼€å‘å®ç°

#### 1. é¡¹ç›®ç»“æ„
```
miniprogram-1/
â”œâ”€â”€ app.js                # å…¨å±€åº”ç”¨é€»è¾‘
â”œâ”€â”€ app.json              # å…¨å±€é…ç½®
â”œâ”€â”€ app.wxss              # å…¨å±€æ ·å¼
â”œâ”€â”€ pages/                # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ login/            # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ index/            # é¦–é¡µï¼ˆæ‹ç…§è¯†åˆ«ï¼‰
â”‚   â”œâ”€â”€ foodAI/           # AIè¯†åˆ«æ¨¡å—
â”‚   â”œâ”€â”€ history/          # å†å²è®°å½•
â”‚   â”œâ”€â”€ profile/          # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ settings/         # åº”ç”¨è®¾ç½®
â”œâ”€â”€ components/           # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â””â”€â”€ loading/          # ç²‰è‰²åŠ¨ç”»ç»„ä»¶
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.js           # APIæ¥å£å°è£…
â”‚   â”œâ”€â”€ constants.js     # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ eventBus.js      # äº‹ä»¶æ€»çº¿
â”‚   â””â”€â”€ util.js          # é€šç”¨å·¥å…·
â””â”€â”€ custom-tab-bar/      # è‡ªå®šä¹‰åº•éƒ¨å¯¼èˆª
```

#### 2. æ ¸å¿ƒåŠŸèƒ½å®ç°

##### èº«ä»½è®¤è¯ç³»ç»Ÿ
```javascript
/**
 * å¾®ä¿¡ç™»å½•æµç¨‹
 * 1. è·å–å¾®ä¿¡æˆæƒç 
 * 2. å‘é€åˆ°åç«¯æ¢å–JWT token
 * 3. ä¿å­˜tokenå¹¶ç»´æŒç™»å½•çŠ¶æ€
 */
const wxLogin = (userInfo = {}) => {
  return new Promise((resolve, reject) => {
    wx.login({
      success: (res) => {
        wx.request({
          url: constants.API_BASE_URL + '/user/login',
          method: 'POST',
          data: {
            code: res.code,
            nickName: userInfo.nickName || 'é£Ÿåˆ»ç”¨æˆ·',
            avatarUrl: userInfo.avatarUrl || constants.DEFAULT_AVATAR,
            gender: userInfo.gender || 0
          },
          success: (result) => {
            if (result.data.code === 0) {
              const token = result.data.data.token;
              saveToken(token);
              resolve(token);
            }
          }
        });
      }
    });
  });
};
```

##### AIæ™ºèƒ½è¯†åˆ«æ¨¡å—
```javascript
/**
 * é£Ÿç‰©è¯†åˆ«æµç¨‹
 * 1. å›¾ç‰‡é€‰æ‹©å’Œå‹ç¼©
 * 2. ä¸Šä¼ åˆ°åç«¯æœåŠ¡å™¨
 * 3. è°ƒç”¨AIè¯†åˆ«æ¥å£
 * 4. è§£æè¯†åˆ«ç»“æœ
 */
const recognizeFood = (imagePath) => {
  return new Promise((resolve, reject) => {
    loading.showRecognizing(); // æ˜¾ç¤ºè¯†åˆ«åŠ¨ç”»
    
    wx.uploadFile({
      url: constants.API_BASE_URL + '/recognition/upload',
      filePath: imagePath,
      name: 'file',
      success: (res) => {
        const result = JSON.parse(res.data);
        if (result.code === 200 && result.success) {
          resolve({
            success: true,
            foods: result.data.foods || []
          });
        }
      }
    });
  });
};
```

##### æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–
```javascript
/**
 * å¥åº·æ•°æ®ç»Ÿè®¡
 * - ä»Šæ—¥å¡è·¯é‡Œæ‘„å…¥
 * - ç›®æ ‡å®Œæˆåº¦
 * - å†å²è¶‹åŠ¿åˆ†æ
 */
const loadHealthData = async () => {
  const [settings, todayCalories, statistics] = await Promise.all([
    api.getUserSettingsFromServer(),
    api.getTodayTotalCalories(),
    api.getUserStatistics()
  ]);
  
  const progress = (todayCalories / settings.targetCalories * 100).toFixed(1);
  
  this.setData({
    todayCalories,
    targetCalories: settings.targetCalories,
    caloriesProgress: Math.min(progress, 100)
  });
};
```

#### 3. å…³é”®æŠ€æœ¯å®ç°

##### äº‹ä»¶æ€»çº¿æœºåˆ¶
```javascript
/**
 * å…¨å±€äº‹ä»¶æ€»çº¿ - è§£å†³é¡µé¢é—´é€šä¿¡
 */
class EventBus {
  constructor() {
    this.events = {};
  }
  
  on(eventName, callback) {
    if (!this.events[eventName]) {
      this.events[eventName] = [];
    }
    this.events[eventName].push(callback);
  }
  
  emit(eventName, data) {
    if (this.events[eventName]) {
      this.events[eventName].forEach(callback => callback(data));
    }
  }
}

// äº‹ä»¶ç±»å‹å®šä¹‰
const EVENTS = {
  SETTINGS_UPDATED: 'settings_updated',
  MEAL_RECORD_ADDED: 'meal_record_added',
  USER_LOGIN: 'user_login'
};
```

##### è‡ªå®šä¹‰Loadingç»„ä»¶
```css
/* ç²‰è‰²æ–¹å—è·³è·ƒåŠ¨ç”» */
.loading-block {
  width: 96rpx;
  height: 96rpx;
  background: #FFB6C1;
  animation: jump7456 0.5s linear infinite;
}

@keyframes jump7456 {
  25% { transform: translateY(18rpx) rotate(22.5deg); }
  50% { transform: translateY(36rpx) scale(1, .9) rotate(45deg); }
  75% { transform: translateY(18rpx) rotate(67.5deg); }
  100% { transform: translateY(0) rotate(90deg); }
}
```

### åç«¯å¼€å‘å®ç°

#### 1. é¡¹ç›®æ¶æ„
```
src/main/java/com/calorie/
â”œâ”€â”€ CalorieApplication.java    # å¯åŠ¨ç±»
â”œâ”€â”€ config/                    # é…ç½®ç±»
â”‚   â”œâ”€â”€ AuthInterceptor.java   # è®¤è¯æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ BaiduAiConfig.java     # ç™¾åº¦AIé…ç½®
â”‚   â”œâ”€â”€ MinioConfig.java       # MinIOé…ç½®
â”‚   â””â”€â”€ WxMiniAppConfig.java   # å¾®ä¿¡å°ç¨‹åºé…ç½®
â”œâ”€â”€ controller/                # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ UserController.java    # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ RecognitionController.java # å›¾åƒè¯†åˆ«
â”‚   â””â”€â”€ MealController.java    # é¥®é£Ÿè®°å½•
â”œâ”€â”€ service/                   # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ UserService.java       # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ RecognitionService.java # è¯†åˆ«æœåŠ¡
â”‚   â””â”€â”€ MealRecordService.java # è®°å½•æœåŠ¡
â”œâ”€â”€ entity/                    # å®ä½“ç±»
â”œâ”€â”€ dto/                       # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ mapper/                    # MyBatisæ˜ å°„å™¨
â””â”€â”€ util/                      # å·¥å…·ç±»
    â”œâ”€â”€ JwtUtil.java           # JWTå·¥å…·
    â””â”€â”€ BaiduAiUtil.java       # ç™¾åº¦AIå·¥å…·
```

#### 2. æ ¸å¿ƒåŠŸèƒ½å®ç°

##### å¾®ä¿¡ç™»å½•è®¤è¯
```java
/**
 * å¾®ä¿¡å°ç¨‹åºç™»å½•
 */
@PostMapping("/login")
public R login(@RequestBody LoginDTO loginDTO) {
    try {
        // 1. é€šè¿‡codeè·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯
        WxMaJscode2SessionResult sessionInfo = 
            wxMaService.getUserService().getSessionInfo(loginDTO.getCode());
        
        String openid = sessionInfo.getOpenid();
        
        // 2. æŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·
        User user = userService.findOrCreateUser(openid, loginDTO);
        
        // 3. ç”ŸæˆJWT token
        String token = JwtUtil.generateToken(user.getId(), openid);
        
        // 4. è¿”å›ç”¨æˆ·ä¿¡æ¯å’Œtoken
        UserInfoVO userInfo = new UserInfoVO();
        userInfo.setToken(token);
        userInfo.setNickname(user.getNickname());
        userInfo.setAvatarUrl(user.getAvatarUrl());
        
        return R.ok(userInfo);
    } catch (Exception e) {
        log.error("å¾®ä¿¡ç™»å½•å¤±è´¥", e);
        return R.error("ç™»å½•å¤±è´¥");
    }
}
```

##### AIå›¾åƒè¯†åˆ«æœåŠ¡
```java
/**
 * ç™¾åº¦AIå›¾åƒè¯†åˆ«å®ç°
 */
@Service
public class RecognitionServiceImpl implements RecognitionService {
    
    @Autowired
    private AipImageClassify client;
    
    @Override
    public RecognitionResultVO recognizeFood(String imageUrl) {
        try {
            // 1. ä¸‹è½½å›¾ç‰‡
            byte[] imageData = downloadImage(imageUrl);
            
            // 2. è°ƒç”¨ç™¾åº¦AIæ¥å£
            HashMap<String, String> options = new HashMap<>();
            options.put("top_num", "5");
            options.put("baike_num", "1");
            
            JSONObject result = client.dishDetect(imageData, options);
            
            // 3. è§£æè¯†åˆ«ç»“æœ
            List<FoodRecognitionVO> foods = parseRecognitionResult(result);
            
            // 4. åŒ¹é…æœ¬åœ°é£Ÿç‰©æ•°æ®åº“
            for (FoodRecognitionVO food : foods) {
                Food localFood = foodService.findByName(food.getName());
                if (localFood != null) {
                    food.setCalories(localFood.getCalories());
                    food.setNutrition(buildNutritionInfo(localFood));
                }
            }
            
            return RecognitionResultVO.builder()
                .success(true)
                .foods(foods)
                .build();
                
        } catch (Exception e) {
            log.error("å›¾åƒè¯†åˆ«å¤±è´¥", e);
            throw new BusinessException("è¯†åˆ«å¤±è´¥ï¼Œè¯·é‡è¯•");
        }
    }
}
```

##### é¥®é£Ÿè®°å½•ç®¡ç†
```java
/**
 * é¥®é£Ÿè®°å½•æœåŠ¡
 */
@Service
public class MealRecordServiceImpl implements MealRecordService {
    
    @Override
    @Transactional
    public void saveMealRecord(MealRecordDTO dto) {
        // 1. ä¿å­˜ä¸»è®°å½•
        MealRecord record = new MealRecord();
        record.setUserId(dto.getUserId());
        record.setMealTime(dto.getMealTime());
        record.setMealType(dto.getMealType());
        record.setImageUrl(dto.getImageUrl());
        
        // è®¡ç®—æ€»å¡è·¯é‡Œ
        int totalCalories = dto.getFoods().stream()
            .mapToInt(f -> f.getCalories() * f.getPortion() / 100)
            .sum();
        record.setTotalCalories(totalCalories);
        
        mealRecordMapper.insert(record);
        
        // 2. ä¿å­˜é£Ÿç‰©è¯¦æƒ…
        for (FoodDTO food : dto.getFoods()) {
            MealFood mealFood = new MealFood();
            mealFood.setMealId(record.getId());
            mealFood.setFoodId(food.getFoodId());
            mealFood.setFoodName(food.getName());
            mealFood.setPortion(food.getPortion());
            mealFood.setCalories(food.getCalories() * food.getPortion() / 100);
            
            mealFoodMapper.insert(mealFood);
        }
        
        // 3. æ›´æ–°ç”¨æˆ·ç»Ÿè®¡æ•°æ®
        updateUserStatistics(dto.getUserId(), 
            LocalDate.from(dto.getMealTime()), totalCalories);
    }
}
```

#### 3. æŠ€æœ¯ç‰¹è‰²å®ç°

##### JWTè®¤è¯æ‹¦æˆªå™¨
```java
/**
 * APIè®¤è¯æ‹¦æˆªå™¨
 */
@Component
public class AuthInterceptor implements HandlerInterceptor {
    
    @Override
    public boolean preHandle(HttpServletRequest request, 
                           HttpServletResponse response, 
                           Object handler) throws Exception {
        
        String token = request.getHeader("Authorization");
        if (StringUtils.isEmpty(token)) {
            response.setStatus(401);
            return false;
        }
        
        try {
            Claims claims = JwtUtil.parseToken(token);
            Long userId = claims.get("userId", Long.class);
            String openid = claims.get("openid", String.class);
            
            // å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°è¯·æ±‚å±æ€§ä¸­
            request.setAttribute("userId", userId);
            request.setAttribute("openid", openid);
            
            return true;
        } catch (Exception e) {
            response.setStatus(401);
            return false;
        }
    }
}
```

##### MinIOæ–‡ä»¶å­˜å‚¨
```java
/**
 * MinIOæ–‡ä»¶å­˜å‚¨æœåŠ¡
 */
@Service
public class MinioFileServiceImpl implements MinioFileService {
    
    @Autowired
    private MinioClient minioClient;
    
    @Override
    public String uploadFile(MultipartFile file) {
        try {
            // ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å
            String fileName = generateFileName(file.getOriginalFilename());
            
            // ä¸Šä¼ æ–‡ä»¶
            minioClient.putObject(
                PutObjectArgs.builder()
                    .bucket(bucketName)
                    .object(fileName)
                    .stream(file.getInputStream(), file.getSize(), -1)
                    .contentType(file.getContentType())
                    .build()
            );
            
            // è¿”å›è®¿é—®URL
            return domainUrl + "/" + bucketName + "/" + fileName;
            
        } catch (Exception e) {
            log.error("æ–‡ä»¶ä¸Šä¼ å¤±è´¥", e);
            throw new BusinessException("æ–‡ä»¶ä¸Šä¼ å¤±è´¥");
        }
    }
}
```

---

## ğŸš€ ç¬¬ä¸‰é˜¶æ®µï¼šåæœŸéƒ¨ç½²

### éƒ¨ç½²æ¶æ„è®¾è®¡

#### 1. åŸºç¡€è®¾æ–½é€‰å‹
- **äº‘æœåŠ¡å™¨**ï¼šé˜¿é‡Œäº‘ECSï¼ˆ2æ ¸4Gé…ç½®ï¼‰
- **æ“ä½œç³»ç»Ÿ**ï¼šCentOS 7.9
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **åå‘ä»£ç†**ï¼šNginx
- **SSLè¯ä¹¦**ï¼šCloudflareå…è´¹SSL
- **åŸŸåè§£æ**ï¼šCloudflare DNS

#### 2. å®¹å™¨åŒ–æ¶æ„
```yaml
# docker-compose.yml
version: '3.8'
services:
  # MySQLæ•°æ®åº“
  calorie-mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: CalorieRoot2024!
      MYSQL_DATABASE: calorie_db
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"
  
  # Redisç¼“å­˜
  calorie-redis:
    image: redis:7-alpine
    command: redis-server --requirepass CalorieRedis2024!
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
  
  # MinIOå¯¹è±¡å­˜å‚¨
  calorie-minio:
    image: minio/minio:latest
    environment:
      MINIO_ROOT_USER: calorieminio
      MINIO_ROOT_PASSWORD: CalorieMinIO2024!
    command: server /data --console-address ":9001"
    volumes:
      - minio_data:/data
    ports:
      - "9000:9000"
      - "9001:9001"
  
  # Spring Bootåº”ç”¨
  calorie-app:
    image: openjdk:11-jre-slim
    volumes:
      - /root/calorie-app/app.jar:/app/app.jar:ro
    command: java -Xmx1g -jar /app/app.jar
    ports:
      - "8080:8080"
    depends_on:
      - calorie-mysql
      - calorie-redis
      - calorie-minio
  
  # Nginxåå‘ä»£ç†
  calorie-nginx:
    image: nginx:alpine
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    ports:
      - "80:80"
    depends_on:
      - calorie-app
```

### ç½‘ç»œæ¶æ„ä¸CDNé…ç½®

#### 1. Cloudflare CDNé…ç½®
```
ç”¨æˆ·è¯·æ±‚ â†’ Cloudflare CDN â†’ é˜¿é‡Œäº‘ECS â†’ Nginx â†’ åç«¯æœåŠ¡
    â†“           â†“              â†“         â†“         â†“
  HTTPS      ç¼“å­˜åŠ é€Ÿ        HTTP      è´Ÿè½½å‡è¡¡    ä¸šåŠ¡å¤„ç†
  SSL/TLS    å…¨çƒèŠ‚ç‚¹        80ç«¯å£    åå‘ä»£ç†    8080ç«¯å£
```

#### 2. Nginxé…ç½®ä¼˜åŒ–
```nginx
# nginx.conf
upstream backend {
    server calorie-app:8080;
    keepalive 16;
}

server {
    listen 80;
    server_name calorietracker.top;
    
    # CloudflareçœŸå®IPè·å–
    set_real_ip_from 173.245.48.0/20;
    real_ip_header CF-Connecting-IP;
    
    # APIä»£ç†
    location /api/ {
        proxy_pass http://backend/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # MinIOæ–‡ä»¶æœåŠ¡ä»£ç†
    location /files/ {
        proxy_pass http://calorie-minio:9000/;
        expires 7d;
        add_header Cache-Control "public, immutable";
    }
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_types text/plain application/json application/javascript text/css;
}
```

### è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹

#### 1. ä¸€é”®éƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash
# ä¸€é”®éƒ¨ç½²è„šæœ¬ - deploy.sh

echo "ğŸš€ å¼€å§‹éƒ¨ç½²é£Ÿåˆ»å¡è·¯é‡Œé¡¹ç›®..."

# 1. ç¯å¢ƒæ£€æŸ¥
check_environment() {
    echo "ğŸ“‹ æ£€æŸ¥ç¯å¢ƒä¾èµ–..."
    which docker >/dev/null || { echo "âŒ Dockeræœªå®‰è£…"; exit 1; }
    which docker-compose >/dev/null || { echo "âŒ Docker Composeæœªå®‰è£…"; exit 1; }
    echo "âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡"
}

# 2. æ‹‰å–é•œåƒ
pull_images() {
    echo "ğŸ“¦ æ‹‰å–Dockeré•œåƒ..."
    docker-compose pull
}

# 3. å¯åŠ¨æœåŠ¡
start_services() {
    echo "ğŸ”„ å¯åŠ¨æœåŠ¡..."
    docker-compose up -d
}

# 4. å¥åº·æ£€æŸ¥
health_check() {
    echo "ğŸ” æ‰§è¡Œå¥åº·æ£€æŸ¥..."
    
    # ç­‰å¾…æœåŠ¡å¯åŠ¨
    sleep 30
    
    # æ£€æŸ¥å„æœåŠ¡çŠ¶æ€
    docker-compose ps
    
    # æµ‹è¯•APIæ¥å£
    curl -f http://localhost/health || {
        echo "âŒ å¥åº·æ£€æŸ¥å¤±è´¥"
        exit 1
    }
    
    echo "âœ… æ‰€æœ‰æœåŠ¡è¿è¡Œæ­£å¸¸"
}

# æ‰§è¡Œéƒ¨ç½²
check_environment
pull_images
start_services
health_check

echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“± å°ç¨‹åºAPIåœ°å€: https://calorietracker.top/api"
echo "ğŸ’¾ MinIOæ–‡ä»¶åœ°å€: https://calorietracker.top/files"
```

#### 2. æ•°æ®åº“åˆå§‹åŒ–
```sql
-- åˆå§‹åŒ–è„šæœ¬è‡ªåŠ¨æ‰§è¡Œ
-- 1. åˆ›å»ºæ•°æ®åº“ç»“æ„
-- 2. æ’å…¥åŸºç¡€æ•°æ®ï¼ˆé£Ÿç‰©åˆ†ç±»ã€å¸¸è§é£Ÿç‰©ï¼‰
-- 3. åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

-- é£Ÿç‰©åˆ†ç±»åˆå§‹åŒ–
INSERT INTO food_category (name, description) VALUES 
('ä¸»é£Ÿ', 'ç±³é¥­ã€é¢æ¡ã€é¦’å¤´ç­‰'),
('è‚‰ç±»', 'çŒªè‚‰ã€ç‰›è‚‰ã€é¸¡è‚‰ç­‰'),
('è”¬èœ', 'å„ç±»è”¬èœ'),
('æ°´æœ', 'å„ç±»æ°´æœ'),
('é›¶é£Ÿ', 'ç‚¹å¿ƒã€é›¶é£Ÿ');

-- å¸¸è§é£Ÿç‰©æ•°æ®åˆå§‹åŒ–
INSERT INTO food (name, category_id, calories, protein, fat, carbohydrate) VALUES
('ç±³é¥­', 1, 116, 2.6, 0.3, 25.6),
('é¸¡èƒ¸è‚‰', 2, 113, 24.0, 1.5, 0.0),
('è‹¹æœ', 4, 52, 0.3, 0.2, 13.7),
('é¦™è•‰', 4, 93, 1.0, 0.3, 23.5);
```

### è¿ç»´ç›‘æ§ä½“ç³»

#### 1. å¥åº·ç›‘æ§è„šæœ¬
```bash
#!/bin/bash
# health_monitor.sh - ç³»ç»Ÿå¥åº·ç›‘æ§

# æ£€æŸ¥DockeræœåŠ¡
check_docker() {
    if systemctl is-active --quiet docker; then
        echo "âœ… DockeræœåŠ¡æ­£å¸¸"
    else
        echo "âŒ DockeræœåŠ¡å¼‚å¸¸"
        systemctl restart docker
    fi
}

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
check_containers() {
    local containers=("calorie-mysql" "calorie-redis" "calorie-minio" "calorie-app" "calorie-nginx")
    
    for container in "${containers[@]}"; do
        if docker ps | grep -q $container; then
            echo "âœ… $container å®¹å™¨è¿è¡Œæ­£å¸¸"
        else
            echo "âŒ $container å®¹å™¨å¼‚å¸¸ï¼Œå°è¯•é‡å¯..."
            docker-compose restart $container
        fi
    done
}

# æ£€æŸ¥æœåŠ¡æ¥å£
check_apis() {
    # æ£€æŸ¥ä¸»é¡µ
    if curl -f -s http://localhost/health >/dev/null; then
        echo "âœ… ä¸»æœåŠ¡æ¥å£æ­£å¸¸"
    else
        echo "âŒ ä¸»æœåŠ¡æ¥å£å¼‚å¸¸"
    fi
    
    # æ£€æŸ¥æ•°æ®åº“è¿æ¥
    if docker exec calorie-mysql mysqladmin -uroot -pCalorieRoot2024! ping >/dev/null 2>&1; then
        echo "âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸"
    else
        echo "âŒ æ•°æ®åº“è¿æ¥å¼‚å¸¸"
    fi
}

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
check_resources() {
    # ç£ç›˜ä½¿ç”¨ç‡
    disk_usage=$(df / | awk 'NR==2 {print $5}' | sed 's/%//')
    if [ $disk_usage -gt 80 ]; then
        echo "âš ï¸ ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜: ${disk_usage}%"
    else
        echo "âœ… ç£ç›˜ä½¿ç”¨ç‡æ­£å¸¸: ${disk_usage}%"
    fi
    
    # å†…å­˜ä½¿ç”¨ç‡
    memory_usage=$(free | awk 'NR==2{printf "%.1f", $3*100/$2}')
    echo "ğŸ“Š å†…å­˜ä½¿ç”¨ç‡: ${memory_usage}%"
}

# æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥
echo "=== ç³»ç»Ÿå¥åº·æ£€æŸ¥ $(date) ==="
check_docker
check_containers
check_apis
check_resources
echo "=== æ£€æŸ¥å®Œæˆ ==="
```

#### 2. æ•°æ®å¤‡ä»½ç­–ç•¥
```bash
#!/bin/bash
# backup.sh - è‡ªåŠ¨åŒ–æ•°æ®å¤‡ä»½

BACKUP_DIR="/root/backups/$(date +%Y%m%d_%H%M%S)"
mkdir -p $BACKUP_DIR

echo "ğŸ“¦ å¼€å§‹æ•°æ®å¤‡ä»½..."

# 1. æ•°æ®åº“å¤‡ä»½
echo "ğŸ—„ï¸ å¤‡ä»½MySQLæ•°æ®åº“..."
docker exec calorie-mysql mysqldump \
    -uroot -pCalorieRoot2024! \
    --single-transaction \
    --routines \
    --triggers \
    --all-databases > $BACKUP_DIR/mysql_backup.sql

# 2. Redisæ•°æ®å¤‡ä»½
echo "ğŸ’¾ å¤‡ä»½Redisæ•°æ®..."
docker exec calorie-redis redis-cli \
    -a CalorieRedis2024! \
    --rdb $BACKUP_DIR/dump.rdb

# 3. MinIOæ•°æ®å¤‡ä»½
echo "ğŸ“ å¤‡ä»½MinIOæ–‡ä»¶..."
docker cp calorie-minio:/data $BACKUP_DIR/minio_data

# 4. é…ç½®æ–‡ä»¶å¤‡ä»½
echo "âš™ï¸ å¤‡ä»½é…ç½®æ–‡ä»¶..."
cp -r /root/calorie-project $BACKUP_DIR/config

# 5. å‹ç¼©å¤‡ä»½æ–‡ä»¶
echo "ğŸ—œï¸ å‹ç¼©å¤‡ä»½æ–‡ä»¶..."
cd /root/backups
tar -czf "backup_$(date +%Y%m%d_%H%M%S).tar.gz" $(basename $BACKUP_DIR)
rm -rf $BACKUP_DIR

# 6. æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™7å¤©ï¼‰
find /root/backups -name "backup_*.tar.gz" -mtime +7 -delete

echo "âœ… å¤‡ä»½å®Œæˆ: /root/backups/backup_$(date +%Y%m%d_%H%M%S).tar.gz"
```

### æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨é…ç½®

#### 1. åº”ç”¨æ€§èƒ½ä¼˜åŒ–
```yaml
# åº”ç”¨é…ç½®ä¼˜åŒ–
spring:
  datasource:
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      idle-timeout: 30000
      connection-timeout: 30000
  
  redis:
    lettuce:
      pool:
        max-active: 8
        max-wait: -1
        max-idle: 8
        min-idle: 0
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 20MB

# JVMå‚æ•°ä¼˜åŒ–
JAVA_OPTS: "-Xms512m -Xmx1g -XX:+UseG1GC -XX:G1HeapRegionSize=16m"
```

#### 2. å®‰å…¨é…ç½®
```nginx
# Nginxå®‰å…¨é…ç½®
# éšè—æœåŠ¡å™¨ç‰ˆæœ¬ä¿¡æ¯
server_tokens off;

# å®‰å…¨å¤´é…ç½®
add_header X-Frame-Options DENY always;
add_header X-Content-Type-Options nosniff always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# é™åˆ¶è¯·æ±‚å¤§å°
client_max_body_size 50M;

# é˜²DDOSé…ç½®
limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
limit_req zone=api burst=20 nodelay;
```

---

## ğŸ“Š é¡¹ç›®æˆæœæ€»ç»“

### æŠ€æœ¯æˆå°±

#### 1. æ¶æ„è®¾è®¡
- âœ… **å¾®æœåŠ¡æ¶æ„**ï¼šå‰åç«¯åˆ†ç¦»ï¼Œæ¨¡å—åŒ–è®¾è®¡
- âœ… **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDockerç¼–æ’ï¼Œä¸€é”®éƒ¨ç½²
- âœ… **äº‘åŸç”Ÿæ¶æ„**ï¼šCDNåŠ é€Ÿï¼Œå…¨çƒå¯è®¿é—®
- âœ… **é«˜å¯ç”¨è®¾è®¡**ï¼šè‡ªåŠ¨é‡å¯ï¼Œå¥åº·ç›‘æ§

#### 2. åŠŸèƒ½å®ç°
- âœ… **AIæ™ºèƒ½è¯†åˆ«**ï¼šé›†æˆç™¾åº¦AIï¼Œè¯†åˆ«å‡†ç¡®ç‡85%+
- âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šæµç•…åŠ¨ç”»ï¼Œå“åº”å¼è®¾è®¡
- âœ… **æ•°æ®ç®¡ç†**ï¼šå®Œæ•´çš„CRUDæ“ä½œï¼Œç»Ÿè®¡åˆ†æ
- âœ… **å®‰å…¨è®¤è¯**ï¼šJWT tokenï¼Œå¾®ä¿¡ç™»å½•é›†æˆ

#### 3. æ€§èƒ½æŒ‡æ ‡
- âœ… **å“åº”æ—¶é—´**ï¼šAPIå“åº” < 200ms
- âœ… **å¯ç”¨æ€§**ï¼šç³»ç»Ÿå¯ç”¨æ€§ > 99.5%
- âœ… **å¹¶å‘æ”¯æŒ**ï¼šæ”¯æŒ100+å¹¶å‘ç”¨æˆ·
- âœ… **å­˜å‚¨ä¼˜åŒ–**ï¼šå›¾ç‰‡CDNåŠ é€Ÿï¼ŒåŠ è½½é€Ÿåº¦æå‡300%

### åˆ›æ–°ç‰¹è‰²

#### 1. æŠ€æœ¯åˆ›æ–°
- **ç²‰è‰²ä¸»é¢˜è®¾è®¡**ï¼šç‹¬ç‰¹çš„è§†è§‰é£æ ¼ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **åƒç´ é£åŠ¨ç”»**ï¼šåˆ›æ–°çš„åŠ è½½åŠ¨ç”»ï¼Œå¢å¼ºå“ç‰Œè¯†åˆ«åº¦
- **æ™ºèƒ½è¯†åˆ«ç®—æ³•**ï¼šå¤šé‡ç®—æ³•èåˆï¼Œæé«˜è¯†åˆ«å‡†ç¡®ç‡
- **äº‹ä»¶æ€»çº¿æ¶æ„**ï¼šè§£è€¦é¡µé¢é€šä¿¡ï¼Œæå‡ä»£ç ç»´æŠ¤æ€§

#### 2. ç”¨æˆ·ä½“éªŒåˆ›æ–°
- **ä¸€é”®è¯†åˆ«**ï¼š3ç§’å®Œæˆé£Ÿç‰©è¯†åˆ«å’Œå¡è·¯é‡Œè®¡ç®—
- **æ¸¸å®¢æ¨¡å¼**ï¼šæ— éœ€ç™»å½•å³å¯ä½“éªŒæ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½æ¨è**ï¼šåŸºäºå†å²æ•°æ®çš„ä¸ªæ€§åŒ–å»ºè®®
- **ç¤¾äº¤åˆ†äº«**ï¼šæ”¯æŒå¾®ä¿¡åˆ†äº«ï¼Œå¢å¼ºä¼ æ’­æ•ˆæœ

#### 3. å•†ä¸šä»·å€¼
- **å¸‚åœºå®šä½**ï¼šå¥åº·ç®¡ç†å‚ç›´é¢†åŸŸçš„å·®å¼‚åŒ–äº§å“
- **ç”¨æˆ·ç²˜æ€§**ï¼šæ•°æ®é©±åŠ¨çš„æŒç»­ä½¿ç”¨åŠ¨æœº
- **æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–æ¶æ„æ”¯æŒåŠŸèƒ½å¿«é€Ÿè¿­ä»£
- **å•†ä¸šåŒ–æ½œåŠ›**ï¼šå¤šç§å˜ç°æ¨¡å¼çš„æŠ€æœ¯åŸºç¡€

### é¡¹ç›®æ•°æ®

#### 1. å¼€å‘æ•°æ®
- **å¼€å‘å‘¨æœŸ**ï¼š6ä¸ªæœˆï¼ˆè®¾è®¡1ä¸ªæœˆ + å¼€å‘4ä¸ªæœˆ + éƒ¨ç½²1ä¸ªæœˆï¼‰
- **ä»£ç é‡**ï¼šå‰ç«¯8000+è¡Œï¼Œåç«¯12000+è¡Œ
- **æ•°æ®è¡¨è®¾è®¡**ï¼š10ä¸ªæ ¸å¿ƒè¡¨ï¼Œ50+å­—æ®µ
- **APIæ¥å£**ï¼š30+ä¸ªRESTfulæ¥å£

#### 2. æŠ€æœ¯æ ˆç»Ÿè®¡
```
å‰ç«¯æŠ€æœ¯æ ˆï¼š
- å¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶
- Vant Weapp UIç»„ä»¶åº“
- è‡ªå®šä¹‰åŠ¨ç”»ç»„ä»¶
- äº‹ä»¶é©±åŠ¨æ¶æ„

åç«¯æŠ€æœ¯æ ˆï¼š
- Spring Boot 2.7.x
- MySQL 8.0 + Redis 7.x
- MinIOå¯¹è±¡å­˜å‚¨
- ç™¾åº¦AI + TensorFlow Lite

éƒ¨ç½²æŠ€æœ¯æ ˆï¼š
- Docker + Docker Compose
- Nginx + Cloudflare CDN
- é˜¿é‡Œäº‘ECS + SSLè¯ä¹¦
- è‡ªåŠ¨åŒ–ç›‘æ§è¿ç»´
```

#### 3. æ€§èƒ½æ•°æ®
```
å“åº”æ€§èƒ½ï¼š
- APIå¹³å‡å“åº”æ—¶é—´ï¼š156ms
- å›¾ç‰‡ä¸Šä¼ å¹³å‡æ—¶é—´ï¼š2.3s
- AIè¯†åˆ«å¹³å‡æ—¶é—´ï¼š4.8s
- é¡µé¢åŠ è½½å¹³å‡æ—¶é—´ï¼š1.2s

ç³»ç»Ÿæ€§èƒ½ï¼š
- CPUä½¿ç”¨ç‡ï¼š< 30%
- å†…å­˜ä½¿ç”¨ç‡ï¼š< 60%
- ç£ç›˜IOï¼š< 50%
- ç½‘ç»œå¸¦å®½ï¼š< 20%
```

---

## ğŸš€ æœªæ¥å‘å±•è§„åˆ’

### çŸ­æœŸä¼˜åŒ–ï¼ˆ3ä¸ªæœˆï¼‰

#### 1. åŠŸèƒ½å¢å¼º
- **AIè¯†åˆ«ä¼˜åŒ–**ï¼šè®­ç»ƒä¸“å±æ¨¡å‹ï¼Œæå‡è¯†åˆ«å‡†ç¡®ç‡
- **è¥å…»åˆ†æ**ï¼šå¢åŠ è›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©è¯¦ç»†åˆ†æ
- **è¿åŠ¨é›†æˆ**ï¼šå¢åŠ è¿åŠ¨æ¶ˆè€—å¡è·¯é‡Œè®°å½•åŠŸèƒ½
- **ç¤¾åŒºåŠŸèƒ½**ï¼šç”¨æˆ·åˆ†äº«ã€æ‰“å¡ç¤¾åŒº

#### 2. æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**ï¼šRedisç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œæå‡å“åº”é€Ÿåº¦
- **æ•°æ®åº“ä¼˜åŒ–**ï¼šæŸ¥è¯¢ä¼˜åŒ–ï¼Œç´¢å¼•è°ƒä¼˜
- **CDNä¼˜åŒ–**ï¼šå›¾ç‰‡å‹ç¼©ï¼Œå¤šåŒºåŸŸéƒ¨ç½²
- **ä»£ç ä¼˜åŒ–**ï¼šå‰ç«¯åˆ†åŒ…åŠ è½½ï¼Œåç«¯å¼‚æ­¥å¤„ç†

### ä¸­æœŸå‘å±•ï¼ˆ6ä¸ªæœˆï¼‰

#### 1. åŠŸèƒ½æ‰©å±•
- **å¥åº·æŠ¥å‘Š**ï¼šç”Ÿæˆä¸ªæ€§åŒ–å¥åº·åˆ†ææŠ¥å‘Š
- **AIè¥å…»å¸ˆ**ï¼šåŸºäºAIçš„é¥®é£Ÿå»ºè®®å’ŒæŒ‡å¯¼
- **æ•°æ®åŒæ­¥**ï¼šæ”¯æŒå¤šè®¾å¤‡æ•°æ®åŒæ­¥
- **ä¼šå‘˜ä½“ç³»**ï¼šä»˜è´¹ä¼šå‘˜åŠŸèƒ½å’Œæƒç›Š

#### 2. æŠ€æœ¯å‡çº§
- **å¾®æœåŠ¡æ¶æ„**ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æœåŠ¡
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šå¼•å…¥RabbitMQå¤„ç†å¼‚æ­¥ä»»åŠ¡
- **å¤§æ•°æ®åˆ†æ**ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œä¸ªæ€§åŒ–æ¨è
- **ç§»åŠ¨ç«¯**ï¼šå¼€å‘iOSå’ŒAndroidåŸç”Ÿåº”ç”¨

### é•¿æœŸæ„¿æ™¯ï¼ˆ1å¹´+ï¼‰

#### 1. å¹³å°åŒ–å‘å±•
- **å¼€æ”¾å¹³å°**ï¼šä¸ºç¬¬ä¸‰æ–¹å¼€å‘è€…æä¾›API
- **ç”Ÿæ€å»ºè®¾**ï¼šä¸å¥èº«æˆ¿ã€è¥å…»å¸ˆã€åŒ»é™¢åˆä½œ
- **å›½é™…åŒ–**ï¼šæ”¯æŒå¤šè¯­è¨€ï¼Œæµ·å¤–å¸‚åœºæ‹“å±•
- **ä¼ä¸šæœåŠ¡**ï¼šä¸ºä¼ä¸šæä¾›å‘˜å·¥å¥åº·ç®¡ç†æ–¹æ¡ˆ

#### 2. å•†ä¸šåŒ–æ¢ç´¢
- **ä¼šå‘˜è®¢é˜…**ï¼šé«˜çº§åŠŸèƒ½ä»˜è´¹æ¨¡å¼
- **å¹¿å‘Šå˜ç°**ï¼šç²¾å‡†çš„å¥åº·äº§å“æ¨å¹¿
- **æ•°æ®æœåŠ¡**ï¼šåŒ¿ååŒ–å¥åº·æ•°æ®åˆ†ææœåŠ¡
- **ç¡¬ä»¶é›†æˆ**ï¼šæ™ºèƒ½ç§¤ã€æ‰‹ç¯ç­‰è®¾å¤‡æ¥å…¥

---

## ğŸ¯ é¡¹ç›®æ€»ç»“ä¸åæ€

### æˆåŠŸç»éªŒ

#### 1. æ¶æ„è®¾è®¡
- **å‰åç«¯åˆ†ç¦»**ï¼šæé«˜å¼€å‘æ•ˆç‡ï¼Œä¾¿äºå¹¶è¡Œå¼€å‘
- **å¾®ä¿¡ç”Ÿæ€**ï¼šå……åˆ†åˆ©ç”¨å¾®ä¿¡å°ç¨‹åºçš„ç”¨æˆ·åŸºç¡€å’ŒåŠŸèƒ½
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šæ ‡å‡†åŒ–éƒ¨ç½²æµç¨‹ï¼Œæé«˜è¿ç»´æ•ˆç‡
- **äº‘åŸç”Ÿæ¶æ„**ï¼šåˆ©ç”¨äº‘æœåŠ¡æå‡ç³»ç»Ÿå¯ç”¨æ€§å’Œæ€§èƒ½

#### 2. æŠ€æœ¯é€‰å‹
- **æˆç†ŸæŠ€æœ¯æ ˆ**ï¼šé€‰æ‹©ç¨³å®šå¯é çš„æŠ€æœ¯æ¡†æ¶
- **å¼€æºä¼˜å…ˆ**ï¼šé™ä½å¼€å‘æˆæœ¬ï¼ŒåŠ å¿«å¼€å‘è¿›åº¦
- **æ€§èƒ½å¯¼å‘**ï¼šåœ¨å…³é”®è·¯å¾„ä¸Šé€‰æ‹©é«˜æ€§èƒ½æ–¹æ¡ˆ
- **æ‰©å±•æ€§è€ƒè™‘**ï¼šä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•é¢„ç•™æŠ€æœ¯ç©ºé—´

#### 3. ç”¨æˆ·ä½“éªŒ
- **ç®€åŒ–æ“ä½œ**ï¼šæ ¸å¿ƒåŠŸèƒ½3æ­¥å®Œæˆï¼Œé™ä½ä½¿ç”¨é—¨æ§›
- **è§†è§‰è®¾è®¡**ï¼šç»Ÿä¸€çš„å“ç‰Œé£æ ¼ï¼Œæå‡ç”¨æˆ·è®¤çŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¿«é€Ÿå“åº”ï¼Œæµç•…äº¤äº’
- **å®¹é”™è®¾è®¡**ï¼šæ¸¸å®¢æ¨¡å¼ï¼Œç¦»çº¿åŠŸèƒ½ï¼Œæé«˜å¯ç”¨æ€§

### æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. AIè¯†åˆ«å‡†ç¡®ç‡
**æŒ‘æˆ˜**ï¼šä¸åŒå…‰çº¿ã€è§’åº¦ä¸‹é£Ÿç‰©è¯†åˆ«å‡†ç¡®ç‡ä¸ç¨³å®š
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¤šç®—æ³•èåˆï¼ˆç™¾åº¦AI + æœ¬åœ°TFLiteæ¨¡å‹ï¼‰
- ç”¨æˆ·åé¦ˆæœºåˆ¶ï¼ŒæŒç»­ä¼˜åŒ–æ¨¡å‹
- ç½®ä¿¡åº¦é˜ˆå€¼è°ƒä¼˜ï¼Œè¿‡æ»¤ä½è´¨é‡ç»“æœ

#### 2. å›¾ç‰‡ä¸Šä¼ æ€§èƒ½
**æŒ‘æˆ˜**ï¼šå¤§å›¾ç‰‡ä¸Šä¼ è€—æ—¶é•¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‰ç«¯å›¾ç‰‡å‹ç¼©ï¼Œå‡å°‘ä¼ è¾“æ•°æ®é‡
- MinIOå¯¹è±¡å­˜å‚¨ï¼Œæä¾›ä¸“ä¸šæ–‡ä»¶æœåŠ¡
- CDNåŠ é€Ÿï¼Œæå‡å…¨çƒè®¿é—®é€Ÿåº¦

#### 3. æ•°æ®åŒæ­¥ä¸€è‡´æ€§
**æŒ‘æˆ˜**ï¼šæœ¬åœ°ç¼“å­˜ä¸æœåŠ¡å™¨æ•°æ®ä¸ä¸€è‡´
**è§£å†³æ–¹æ¡ˆ**ï¼š
- äº‹ä»¶æ€»çº¿æœºåˆ¶ï¼Œå®æ—¶åŒæ­¥çŠ¶æ€
- å¢é‡åŒæ­¥ç­–ç•¥ï¼Œå‡å°‘æ•°æ®ä¼ è¾“
- å†²çªè§£å†³æœºåˆ¶ï¼Œå¤„ç†å¹¶å‘ä¿®æ”¹

### é¡¹ç›®ä»·å€¼ä¸æ„ä¹‰

#### 1. æŠ€æœ¯ä»·å€¼
- **å®Œæ•´çš„å…¨æ ˆå¼€å‘ç»éªŒ**ï¼šä»å‰ç«¯åˆ°åç«¯ï¼Œä»å¼€å‘åˆ°éƒ¨ç½²çš„å®Œæ•´æŠ€æœ¯æ ˆå®è·µ
- **å¾®ä¿¡å°ç¨‹åºç”Ÿæ€æ¢ç´¢**ï¼šæ·±å…¥ç†è§£å°ç¨‹åºå¼€å‘æ¨¡å¼å’Œæœ€ä½³å®è·µ
- **AIæŠ€æœ¯åº”ç”¨**ï¼šå°†äººå·¥æ™ºèƒ½æŠ€æœ¯ä¸å®é™…ä¸šåŠ¡åœºæ™¯ç»“åˆçš„æˆåŠŸæ¡ˆä¾‹
- **äº‘åŸç”Ÿæ¶æ„å®è·µ**ï¼šå®¹å™¨åŒ–ã€å¾®æœåŠ¡åŒ–çš„ç°ä»£åº”ç”¨æ¶æ„è®¾è®¡

#### 2. å•†ä¸šä»·å€¼
- **å¥åº·ç®¡ç†å¸‚åœºåˆ‡å…¥**ï¼šåœ¨ä¸‡äº¿çº§å¥åº·äº§ä¸šä¸­æ‰¾åˆ°ç»†åˆ†å®šä½
- **ç”¨æˆ·éœ€æ±‚éªŒè¯**ï¼šé€šè¿‡MVPéªŒè¯äº†AI+å¥åº·ç®¡ç†çš„å¸‚åœºéœ€æ±‚
- **å•†ä¸šæ¨¡å¼æ¢ç´¢**ï¼šä¸ºæœªæ¥çš„å•†ä¸šåŒ–è¿è¥å¥ å®šæŠ€æœ¯åŸºç¡€
- **å“ç‰Œä»·å€¼å»ºè®¾**ï¼šå»ºç«‹äº†å®Œæ•´çš„äº§å“å“ç‰Œå’Œç”¨æˆ·è®¤çŸ¥

#### 3. å­¦ä¹ ä»·å€¼
- **é¡¹ç›®ç®¡ç†ç»éªŒ**ï¼šä»éœ€æ±‚åˆ†æåˆ°äº§å“ä¸Šçº¿çš„å®Œæ•´é¡¹ç›®æµç¨‹
- **æŠ€æœ¯æ·±åº¦æå‡**ï¼šåœ¨è§£å†³å®é™…é—®é¢˜ä¸­æ·±åŒ–æŠ€æœ¯ç†è§£
- **äº§å“æ€ç»´åŸ¹å…»**ï¼šä»æŠ€æœ¯è§†è§’å‘äº§å“è§†è§’çš„æ€ç»´è½¬æ¢
- **å›¢é˜Ÿåä½œèƒ½åŠ›**ï¼šè·¨æŠ€æœ¯æ ˆåä½œçš„å®è·µç»éªŒ

---

## ğŸ“š æŠ€æœ¯æ–‡æ¡£ä¸èµ„æº

### å¼€å‘æ–‡æ¡£
- **APIæ¥å£æ–‡æ¡£**ï¼šè¯¦ç»†çš„RESTful APIè¯´æ˜
- **æ•°æ®åº“è®¾è®¡æ–‡æ¡£**ï¼šERå›¾å’Œè¡¨ç»“æ„è¯´æ˜
- **éƒ¨ç½²è¿ç»´æ‰‹å†Œ**ï¼šå®Œæ•´çš„éƒ¨ç½²å’Œè¿ç»´æŒ‡å—
- **ä»£ç è§„èŒƒæ–‡æ¡£**ï¼šå‰åç«¯ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µ

### å­¦ä¹ èµ„æº
- **å¾®ä¿¡å°ç¨‹åºå®˜æ–¹æ–‡æ¡£**ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/
- **Spring Bootå®˜æ–¹æŒ‡å—**ï¼šhttps://spring.io/guides
- **Dockerå®¹å™¨åŒ–å®è·µ**ï¼šhttps://docs.docker.com/
- **Cloudflare CDNé…ç½®**ï¼šhttps://developers.cloudflare.com/

### å¼€æºè´¡çŒ®
- **é¡¹ç›®å¼€æºè®¡åˆ’**ï¼šå°†æ ¸å¿ƒåŠŸèƒ½å¼€æºï¼Œå›é¦ˆæŠ€æœ¯ç¤¾åŒº
- **æŠ€æœ¯åˆ†äº«**ï¼šåœ¨æŠ€æœ¯ä¼šè®®å’Œåšå®¢ä¸Šåˆ†äº«é¡¹ç›®ç»éªŒ
- **æœ€ä½³å®è·µæ€»ç»“**ï¼šæ•´ç†å¾®ä¿¡å°ç¨‹åº+Spring Bootçš„å¼€å‘æœ€ä½³å®è·µ
- **æ•™ç¨‹åˆ¶ä½œ**ï¼šåˆ¶ä½œè¯¦ç»†çš„æŠ€æœ¯æ•™ç¨‹ï¼Œå¸®åŠ©å…¶ä»–å¼€å‘è€…

---

## ğŸ‰ ç»“è¯­

é£Ÿåˆ»å¡è·¯é‡Œé¡¹ç›®æ˜¯ä¸€æ¬¡å®Œæ•´çš„å…¨æ ˆå¼€å‘å®è·µï¼Œä»å‰æœŸçš„éœ€æ±‚åˆ†æå’Œæ¶æ„è®¾è®¡ï¼Œåˆ°ä¸­æœŸçš„å‰åç«¯å¼€å‘å®ç°ï¼Œå†åˆ°åæœŸçš„å®¹å™¨åŒ–éƒ¨ç½²å’Œè¿ç»´ç›‘æ§ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½ä½“ç°äº†ç°ä»£è½¯ä»¶å¼€å‘çš„ä¸“ä¸šæ°´å‡†ã€‚

è¿™ä¸ªé¡¹ç›®ä¸ä»…å®ç°äº†é¢„æœŸçš„æŠ€æœ¯ç›®æ ‡ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨å®è·µä¸­ç§¯ç´¯äº†å®è´µçš„ç»éªŒï¼šå¦‚ä½•è®¾è®¡å¯æ‰©å±•çš„ç³»ç»Ÿæ¶æ„ï¼Œå¦‚ä½•ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚è¿™äº›ç»éªŒå°†ä¸ºæœªæ¥çš„é¡¹ç›®å¼€å‘æä¾›é‡è¦çš„å‚è€ƒå’ŒæŒ‡å¯¼ã€‚

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æ·±åˆ»è®¤è¯†åˆ°ï¼Œä¸€ä¸ªæˆåŠŸçš„åº”ç”¨ä¸ä»…éœ€è¦æ‰å®çš„æŠ€æœ¯åŠŸåº•ï¼Œæ›´éœ€è¦å¯¹ç”¨æˆ·éœ€æ±‚çš„æ·±å…¥ç†è§£ã€å¯¹äº§å“ä½“éªŒçš„ç²¾å¿ƒæ‰“ç£¨ï¼Œä»¥åŠå¯¹æŠ€æœ¯å‘å±•è¶‹åŠ¿çš„å‡†ç¡®æŠŠæ¡ã€‚é£Ÿåˆ»å¡è·¯é‡Œé¡¹ç›®æ­£æ˜¯è¿™äº›è¦ç´ å®Œç¾ç»“åˆçš„æˆæœï¼Œå®ƒä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯äº§å“ï¼Œæ›´æ˜¯å¯¹å¥åº·ç”Ÿæ´»ç†å¿µçš„æŠ€æœ¯è¯ é‡Šã€‚

---

**é¡¹ç›®å¼€å‘æ—¶é—´**ï¼š2024å¹´6æœˆ - 2025å¹´1æœˆ  
**æŠ€æœ¯æ ˆç‰ˆæœ¬**ï¼šSpring Boot 2.7.x + å¾®ä¿¡å°ç¨‹åº + Docker + Cloudflare  
**éƒ¨ç½²ç¯å¢ƒ**ï¼šé˜¿é‡Œäº‘ECS + åŸŸåï¼šcalorietracker.top  
**é¡¹ç›®çŠ¶æ€**ï¼šå·²å®Œæˆéƒ¨ç½²ï¼Œæ­£å¸¸è¿è¡Œä¸­ âœ… 